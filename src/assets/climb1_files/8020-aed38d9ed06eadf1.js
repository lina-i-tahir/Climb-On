"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8020],{62879:function(n,e,t){var a,r=t(67294);function i(){return i=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},i.apply(this,arguments)}e.Z=function(n){return r.createElement("svg",i({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),a||(a=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 4.5A1.5 1.5 0 0 0 9 6v3c0 .373.136.714.361.977L6.77 13H5.5A1.5 1.5 0 0 0 4 14.5v3A1.5 1.5 0 0 0 5.5 19h3a1.5 1.5 0 0 0 1.5-1.5v-3A1.5 1.5 0 0 0 8.5 13h-.413l2.161-2.521c.082.014.166.021.252.021h3c.086 0 .17-.007.252-.021l2.163 2.523A1.5 1.5 0 0 0 14.5 14.5v3A1.5 1.5 0 0 0 16 19h3a1.5 1.5 0 0 0 1.5-1.5v-3A1.5 1.5 0 0 0 19 13h-1.77l-2.591-3.023C14.864 9.714 15 9.373 15 9V6a1.5 1.5 0 0 0-1.5-1.5h-3Zm6.496 9.5H19a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5h.996ZM5.5 14h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5ZM10 6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3A.5.5 0 0 1 10 9V6Z",fill:"#47495F"})))}},7738:function(n,e,t){t.d(e,{U:function(){return p},Z:function(){return v}});var a=t(47568),r=t(828),i=t(20414),c=t(85893),s=t(41664),o=t.n(s),l=t(39057),u=t(62879),d=t(94184),h=t.n(d),f=t(50577);function v(n){var e=n.mediaId,t=n.tag,s=n.onDelete,d=n.size,v=void 0===d?"md":d,g=n.showDelete,b=void 0!==g&&g,x=n.isAuthorized,w=void 0!==x&&x,j=(0,r.Z)(p(t),2),y=j[0],N=j[1];if(null==y||null==N)return null;var Z=t.type===f.fR.area;return(0,c.jsx)(o(),{href:y,prefetch:!1,children:(0,c.jsxs)("a",{className:h()("badge hover:underline max-w-full",Z?"badge-info bg-opacity-60":"badge-outline","lg"===v?"badge-lg gap-2":"gap-1"),onClick:m,title:N,children:[Z&&(0,c.jsx)("div",{className:"h-6 w-6 grid place-content-center",children:(0,c.jsx)(u.Z,{className:"w-6 h-6"})}),(0,c.jsx)("div",{className:"mt-0.5 whitespace-nowrap truncate text-sm",children:N}),w&&b&&(0,c.jsx)("button",{onClick:function(){var n=(0,a.Z)((function(n){return(0,i.__generator)(this,(function(a){switch(a.label){case 0:return n.preventDefault(),[4,s({mediaId:e,tagId:t.id,entityId:t.targetId,entityType:t.type})];case 1:return a.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),title:"Delete tag",children:(0,c.jsx)("div",{className:"rounded-full -mr-2.5",children:(0,c.jsx)(l.Z,{className:h()("cursor-pointer stroke-1 hover:stroke-2","lg"===v?"w-6 h-6":"w-5 h-5")})})})]})})}var m=function(n){return n.stopPropagation()},p=function(n){if(null==n)return[null,null];var e=n.targetId,t=n.climbName,a=n.areaName;switch(n.type){case f.fR.climb:return["/climbs/".concat(e),null!==t&&void 0!==t?t:""];case f.fR.area:return["/crag/".concat(e),a];default:return[null,null]}}},3152:function(n,e,t){t.d(e,{k:function(){return A},Z:function(){return _}});var a=t(47568),r=t(20414),i=t(85893),c=t(67294),s=t(94184),o=t.n(s),l=t(21809),u=t(78680),d=t(80425),h=t(33299),f=t(41799),v=t(69396),m=t(34524),p=t(77533),g=t(26182);function b(n){var e=n.openSearch,t=void 0!==e&&e,c=n.onSelect,s=n.onCancel,o=n.label,l=void 0===o?(0,i.jsx)(x,{}):o;return(0,i.jsx)(m.j,{label:l,placeholder:"Climb search",open:t,onCancel:s,classNames:(0,v.Z)((0,f.Z)({},g._r),{detachedSearchButton:"aa-hidden-mobile-trigger-btn"}),getSources:function(){var n=(0,a.Z)((function(n){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return""===(null===(e=n.query)||void 0===e?void 0:e.trim())?[2,[]]:[4,(0,p.E)(e,c,!1)];case 1:return[2,t.sent()]}}))}));return function(e){return n.apply(this,arguments)}}(),resultContainer:g.il})}var x=function(){return(0,i.jsx)("button",{className:"btn btn-ghost btn-circle","aria-label":"climb-search",children:(0,i.jsx)(l.Z,{className:"w-6 h-6"})})},w=t(50577);function j(n){var e=n.mediaWithTags,t=n.onCancel,c=n.onAdd,s=n.label,o=n.openSearch,l=void 0!==o&&o;return(0,i.jsx)(b,{onCancel:t,label:s,openSearch:l,onSelect:function(){var n=(0,a.Z)((function(n){var t;return(0,r.__generator)(this,(function(a){return t=n.type===w.py.climb?n.climbUUID:n.id,c({mediaId:e.id,entityId:t,entityType:n.type===w.py.climb?w.fR.climb:w.fR.area}),[2]}))}));return function(e){return n.apply(this,arguments)}}()})}var y=t(22667),N=t(7738),Z=t(77244);function _(n){var e=n.mediaWithTags,t=n.isAuthorized,c=void 0!==t&&t,s=n.isAuthenticated,l=void 0!==s&&s,u=n.showDelete,d=void 0!==u&&u,f=n.showActions,v=void 0===f||f,m=n.className,p=void 0===m?"":m,g=(0,Z.Z)(),b=g.addEntityTagCmd,x=g.removeEntityTagCmd,w=(0,h.useSession)();if(null==e)return null;var y=function(){var n=(0,a.Z)((function(n){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return[4,b(n,null===(e=w.data)||void 0===e?void 0:e.accessToken)];case 1:return t.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),_=function(){var n=(0,a.Z)((function(n){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return[4,x(n,null===(e=w.data)||void 0===e?void 0:e.accessToken)];case 1:return t.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),A=e.entityTags,k=e.id;return(0,i.jsxs)("div",{className:o()("text-xs inline-flex flex-wrap justify-start items-center gap-2 overflow-hidden",p),children:[A.map((function(n){return(0,i.jsx)(N.Z,{mediaId:k,tag:n,onDelete:_,isAuthorized:c,showDelete:d},"".concat(n.targetId))})),v&&c&&(0,i.jsx)(j,{mediaWithTags:e,label:(0,i.jsx)(C,{}),onAdd:y}),v&&!l&&(0,i.jsx)(C,{onClick:function(){(0,h.signIn)("auth0")}})]})}var A=function(n){var e=n.mediaWithTags,t=n.isAuthorized,s=void 0!==t&&t,o=(0,h.useSession)(),f=(0,Z.Z)(),v=f.addEntityTagCmd,m=f.removeEntityTagCmd,p=(0,c.useState)(!1),g=p[0],b=p[1],x=function(){var n=(0,a.Z)((function(n){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return[4,v(n,null===(e=o.data)||void 0===e?void 0:e.accessToken)];case 1:return t.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),w=function(){var n=(0,a.Z)((function(n){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return[4,m(n,null===(e=o.data)||void 0===e?void 0:e.accessToken)];case 1:return t.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),_=e.id,A=e.entityTags;return(0,i.jsxs)("div",{"aria-label":"tag popup",children:[(0,i.jsxs)(y.h_,{children:[(0,i.jsx)(y.WA,{className:"btn btn-circle btn-ghost","aria-label":"tag menu",children:(0,i.jsx)(l.Z,{className:"w-8 h-8"})}),(0,i.jsxs)(y.Nv,{align:"end",children:[(0,i.jsx)(i.Fragment,{children:A.map((function(n){return(0,i.jsx)(d.Xi,{className:"px-2 py-3",children:(0,i.jsx)(N.Z,{mediaId:_,tag:n,isAuthorized:s,onDelete:w,showDelete:!0,size:"lg"})},"".concat(n.id))}))}),(0,i.jsx)(y.u2,{}),(0,i.jsx)(y.hP,{icon:(0,i.jsx)(u.Z,{className:"w-5 h-5"}),text:"Add new tag",className:"font-bold",onSelect:function(){s?b(!0):(0,h.signIn)("auth0")}}),(0,i.jsx)(y.u2,{}),(0,i.jsx)(y.hP,{text:"Cancel"})]})]}),(0,i.jsx)(j,{onCancel:function(){return b(!1)},openSearch:g,mediaWithTags:e,onAdd:x,label:(0,i.jsx)("div",{className:"hidden"})})]})},C=function(n){var e=n.onClick,t=void 0===e?function(){}:e;return(0,i.jsxs)("button",{className:"inline-flex flex-nowrap badge gap-1",onClick:t,children:[(0,i.jsx)(u.Z,{className:"w-4 h-4 inline-block"})," ",(0,i.jsx)("span",{className:"whitespace-nowrap",children:"New tag"})]})}},85867:function(n,e,t){t.d(e,{Z:function(){return r}});var a=t(85893);t(67294);function r(n){var e=n.header,t=n.image,r=n.imageActions,i=n.body;return(0,a.jsxs)("div",{className:"card card-compact",children:[(0,a.jsx)("div",{className:"px-2 sm:px-0 flex items-center justify-between",children:e}),(0,a.jsx)("figure",{className:"overflow-hidden rounded sm:rounded-none sm:rounded-box",children:t}),r,(0,a.jsx)("div",{className:"card-body",children:i})]})}},69162:function(n,e,t){t.d(e,{Cc:function(){return i},KA:function(){return c},xK:function(){return r}});var a=t(51779),r=function(n){var e=n.src,t=n.width,r=n.quality;return"".concat(a.o.CDN_BASE_URL).concat(e,"?format=webp&w=").concat(t,"&q=").concat(null!==r&&void 0!==r?r:"90")},i=function(n){var e=n.src,t=(n.width,n.quality);return"".concat(a.o.CDN_BASE_URL).concat(e,"?format=webp&thumbnail=300&q=").concat(null!==t&&void 0!==t?t:"90")},c=function(n){var e=n.src,t=n.width,r=void 0===t?650:t,i=n.quality;return"".concat(a.o.CDN_BASE_URL).concat(e,"?format=webp&w=").concat(r,"&q=").concat(null!==i&&void 0!==i?i:"90")}}}]);