"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8428],{62879:function(e,n,t){var r,i=t(67294);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},a.apply(this,arguments)}n.Z=function(e){return i.createElement("svg",a({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 4.5A1.5 1.5 0 0 0 9 6v3c0 .373.136.714.361.977L6.77 13H5.5A1.5 1.5 0 0 0 4 14.5v3A1.5 1.5 0 0 0 5.5 19h3a1.5 1.5 0 0 0 1.5-1.5v-3A1.5 1.5 0 0 0 8.5 13h-.413l2.161-2.521c.082.014.166.021.252.021h3c.086 0 .17-.007.252-.021l2.163 2.523A1.5 1.5 0 0 0 14.5 14.5v3A1.5 1.5 0 0 0 16 19h3a1.5 1.5 0 0 0 1.5-1.5v-3A1.5 1.5 0 0 0 19 13h-1.77l-2.591-3.023C14.864 9.714 15 9.373 15 9V6a1.5 1.5 0 0 0-1.5-1.5h-3Zm6.496 9.5H19a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5h.996ZM5.5 14h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5ZM10 6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3A.5.5 0 0 1 10 9V6Z",fill:"#47495F"})))}},38230:function(e,n,t){t.d(n,{M:function(){return d},O:function(){return c}});var r=t(85893),i=t(67294),a=t(80621),l=t(94184),s=t.n(l),o=t(11618),d=function(e){var n,t=e.isClimbPage,l=void 0!==t&&t,d=e.ancestors,c=e.pathTokens,u=e.formAction,m=(0,i.useRef)(null),h=(0,a.Z)(m,{root:null,rootMargin:"0px 0px -100% 0px"}),x=null!==(n=null===h||void 0===h?void 0:h.isIntersecting)&&void 0!==n&&n;return(0,r.jsxs)("div",{ref:m,className:s()("sticky top-0 z-40 py-2 lg:min-h-[4rem] block lg:flex lg:items-center lg:justify-between bg-base-100 -mx-6 px-6",x?"border-b bottom-shadow backdrop-blur-sm bg-opacity-90":""),children:[(0,r.jsx)(o.ZP,{isClimbPage:l,ancestors:d,pathTokens:c}),(0,r.jsx)("div",{className:"hidden lg:block",children:u})]})},c=function(){return(0,r.jsx)("div",{className:"top-0 z-40 py-2 lg:min-h-[4rem] block lg:flex lg:items-center lg:justify-between",children:(0,r.jsx)("div",{className:"bg-base-200/10 h-6 w-60 lg:w-[800px] rounded-box"})})}},18428:function(e,n,t){t.d(n,{o7:function(){return Le},Od:function(){return Ae},ZP:function(){return ke}});var r=t(47568),i=t(41799),a=t(69396),l=t(828),s=t(20414),o=t(85893),d=t(67294),c=t(11163),u=t(5152),m=t.n(u),h=t(87536),x=t(33299),f=t(60958),v=t(76850),p=t(22920),g=t(25550),b=t(89936),j=t(81758),N=t(41664),w=t.n(N),y=t(36005),Z=t(94184),S=t.n(Z),C=t(57037),k=function(e){var n,t=e.editable,r=(0,h.bc)({name:"climbList"}).formState,l=r.defaultValues,s=r.dirtyFields,d=(0,h.qo)({name:"climbList"}),c=null!==(n=null===l||void 0===l?void 0:l.climbList)&&void 0!==n?n:[],u=null===s||void 0===s?void 0:s.climbList,m=P(c,d),x=Math.ceil(d.length/2)-1;return(0,o.jsxs)("div",{className:"mt-16 min-h-[8rem]",children:[(0,o.jsxs)("h3",{children:["Climbs\xa0",(0,o.jsxs)("span",{className:"text-base-300",children:["(",d.length,")"]})]}),(0,o.jsx)("hr",{className:"mt-1 mb-8 border-1 border-base-content"}),(0,o.jsxs)("section",{className:"two-column-table",children:[d.map((function(e,n){var r,l,s,c,m=null!==(s=null===u||void 0===u||null===(r=u[n])||void 0===r?void 0:r.name)&&void 0!==s&&s||null!==(c=null===u||void 0===u||null===(l=u[n])||void 0===l?void 0:l.gradeStr)&&void 0!==c&&c;return(0,o.jsx)(E,(0,a.Z)((0,i.Z)({},e),{index:n,showBorderBottom:n===x||n===d.length-1,dirty:m,editMode:t,dirtyFlags:null===u||void 0===u?void 0:u[n]}),e.id)})),0===d.length&&(0,o.jsx)("div",{className:"text-base-300 italic",children:"None"})]}),t&&(null===m||void 0===m?void 0:m.length)>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("h3",{className:"mt-32 text-base-300 fadeinEffect",children:["To Be Deleted ",(0,o.jsxs)("span",{className:"",children:["(",m.length,")"]})]}),(0,o.jsxs)("section",{className:"two-column-table",children:[m.map((function(e,n){return(0,o.jsx)(E,(0,a.Z)((0,i.Z)({},e),{index:n,toBeDeleted:!0,editMode:t,dirty:!1,showBorderBottom:n===Math.ceil(m.length/2)-1||n===m.length-1}),e.id)})),0===(null===m||void 0===m?void 0:m.length)&&(0,o.jsx)("div",{className:"text-base-300 italic",children:"None"})]})]})]})},E=function(e){var n=e.climbId,t=e.isNew,r=void 0!==t&&t,a=e.editMode,l=e.showBorderBottom,s=void 0!==l&&l;return(0,o.jsxs)(I,{climbId:n,noLink:r,newWindow:a,className:S()("area-row w-full",s?"border-b":""),children:[(0,o.jsx)(T,(0,i.Z)({},e)),(0,o.jsx)(A,(0,i.Z)({},e))]})},T=function(e){var n,t,r,i=e.index,a=e.dirty,l=e.isNew,s=void 0!==l&&l,d=e.toBeDeleted,c=void 0!==d&&d,u=e.disciplines,m=null!==(n=null===u||void 0===u?void 0:u.sport)&&void 0!==n&&n&&!(null!==(t=null===u||void 0===u?void 0:u.trad)&&void 0!==t&&t||null!==(r=null===u||void 0===u?void 0:u.aid)&&void 0!==r&&r);return(0,o.jsxs)("div",{className:S()("rounded-full h-8 w-8 grid place-content-center text-sm text-base-100 indicator",!a||s||c?"":"outline-2 outline-accent outline-offset-4 outline-dashed",m?"bg-sport-climb-cue":"bg-primary/90",c?"bg-opacity-60":""),children:[s&&!c&&(0,o.jsx)("span",{className:"indicator-item indicator-item-mod badge badge-xs badge-accent"}),i+1]})},A=function(e){var n,t,r=e.name,i=e.disciplines,a=e.gradeStr,l=e.errors,s=e.dirtyFlags;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-col items-start items-stretch grow gap-y-1",children:[(0,o.jsx)("div",{className:S()("font-semibold uppercase",null!==(n=null===s||void 0===s?void 0:s.name)&&void 0!==n&&n?"italic text-accent":""),children:r}),(0,o.jsx)("div",{className:S()("flex gap-2 items-center",null===s||void 0===s?void 0:s.disciplines),children:(0,o.jsx)(L,{disciplines:i})})]}),""===a?(0,o.jsx)("div",{className:"text-sm italic text-error",children:"Grade not set"}):(0,o.jsx)("div",{className:S()(null!==(t=null===s||void 0===s?void 0:s.gradeStr)&&void 0!==t&&t?"italic text-accent":"",null!=(null===l||void 0===l?void 0:l.gradeStr)?"italic underline decoration-wavy decoration-error underline-offset-2":"uppercase font-semibold"),children:null===a||void 0===a?void 0:a.substring(0,10)})]})},L=function(e){var n=e.disciplines,t=(0,C.mJ)(n);return(0,o.jsx)("div",{className:S()("text-base-300 text-xs h-2",0===t.length?"italic text-error":""),children:0===t.length?"Disciplines not set":t.join(" \xb7 ")})},I=function(e){var n=e.climbId,t=e.className,r=e.noLink,l=e.newWindow,s=e.children;return null==n||r?(0,o.jsx)("div",{className:t,children:s}):(0,o.jsx)(w(),{href:"/climbs/".concat(n),children:(0,o.jsx)("a",(0,a.Z)((0,i.Z)({className:t},l?{target:"_blank",rel:"noreferrer"}:void 0),{children:s}))})},P=function(e,n){var t=(0,y.HK)(n,"climbId");return e.reduce((function(e,n){return null==(null===t||void 0===t?void 0:t[n.climbId])&&e.push((0,a.Z)((0,i.Z)({},n),{id:n.climbId})),e}),[])},D=t(44635),R=t(52618),B=t(77e3),M=t(47072),_=t(76249),O=t(32274),F=t(55560);function U(e){var n,t=e.areaUuid,l=e.areaName,u=e.parentUuid,m=e.returnToParentPageAfterDelete,f=void 0===m||m,v=e.onSuccess,p=(0,x.useSession)(),g=(0,c.useRouter)();(0,d.useEffect)((function(){"unauthenticated"===p.status&&(0,x.signIn)("auth0")}),[p]);var b,j=function(){var e=(0,r.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return null!=v&&v(),f?[4,g.replace("/crag/"+u)]:[3,2];case 1:e.sent(),g.reload(),e.label=2;case 2:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),N=(0,R.Z)({areaId:u,accessToken:null!==(b=null===p||void 0===p||null===(n=p.data)||void 0===n?void 0:n.accessToken)&&void 0!==b?b:"",onDeleteCompleted:j}).deleteOneAreaCmd,w=(0,h.cI)({mode:"onSubmit",defaultValues:{confirmation:""}}),y=w.handleSubmit,Z=w.setFocus,C=w.formState.isSubmitting,k=function(){var e=(0,r.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,N({uuid:t})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return"authenticated"!==p.status?(0,o.jsx)("div",{className:"dialog-form-default",children:"Checking authorization..."}):((0,d.useEffect)((function(){Z("confirmation")}),[]),(0,o.jsx)(h.RV,(0,a.Z)((0,i.Z)({},w),{children:(0,o.jsxs)("form",{onSubmit:y(k),className:"dialog-form-default",children:[(0,o.jsxs)("div",{children:["You're about to delete '",(0,o.jsx)("span",{className:"font-semibold",children:l}),"'.  Type ",(0,o.jsx)("b",{children:"DELETE"})," to confirm."]}),(0,o.jsx)(F.ZP,{label:"",name:"confirmation",registerOptions:{required:"A confirmation is required.",validate:{confirm:function(e){if("DELETE"!==e)return"Type DELETE in uppercase"}}},className:"input input-primary input-bordered input-md"}),(0,o.jsx)("button",{className:S()("mt-4 btn btn-primary w-full",C?"loading btn-disabled":""),type:"submit",children:"Delete"})]})})))}var V=t(68146),H=t(41544),z=function(e){var n=e.areaName,t=e.areaUuid,r=e.parentUuid,i=e.disabled,a=void 0!==i&&i,l=e.returnToParentPageAfterDelete,s=e.onSuccess,c=e.children,u=(0,d.useState)(!1),m=u[0],h=u[1],x=(0,d.useCallback)((function(){h(!1),p.Am.info("Area '".concat(n,"' deleted.")),null!=s&&s()}),[]);return(0,o.jsxs)(O.hV,{modal:!0,open:m,onOpenChange:h,children:[null==c?(0,o.jsx)($,{disabled:a}):c,(0,o.jsx)(O.cZ,{title:"Delete area",children:(0,o.jsx)(U,{areaName:n,areaUuid:t,parentUuid:r,onSuccess:x,returnToParentPageAfterDelete:l})})]})},$=function(e){var n=e.disabled;return(0,o.jsx)(O.hg,{className:"btn btn-primary btn-sm btn-outline px-6",disabled:n,type:"button",children:"Delete"})},G=function(e){var n=e.disabled;return n?(0,o.jsx)(H.Z,{content:"Please delete child areas or climbs first.",enabled:n,children:(0,o.jsx)("div",{className:"btn btn-ghost btn-circle btn-primary btn-disabled",children:(0,o.jsx)(_.Z,{className:"w-6 h-6"})})}):(0,o.jsx)(O.hg,{"data-no-dnd":"true",className:"z-50 btn btn-ghost btn-circle btn-accent",disabled:n,type:"button",children:(0,o.jsx)(_.Z,{className:"w-6 h-6"})})},q=function(e){var n=e.parentName,t=e.parentUuid,r=e.onSuccess,i=e.children,a=(0,d.useState)(!1),l=a[0],s=a[1];return(0,o.jsxs)(O.hV,{modal:!0,onOpenChange:function(e){!e&&l&&null!=r&&r()},children:[null==i?(0,o.jsx)(J,{}):i,(0,o.jsx)(O.cZ,{title:"Add area",children:(0,o.jsx)(V.ZP,{parentName:n,parentUuid:t,onSuccess:function(){return s(!0)}})})]})},J=function(){return(0,o.jsxs)(O.hg,{className:"flex flex-row items-center gap-4",children:[(0,o.jsx)("div",{className:"border-secondary border-dashed border-4 w-24 h-24 hover:bg-secondary hover:bg-opacity-60 rounded-box flex items-center justify-center",children:(0,o.jsx)(B.Z,{className:"w-8 h-8 text-secondary"})}),(0,o.jsx)("div",{children:"Add New Area"})]})},Q=function(){return(0,o.jsxs)(O.hg,{"data-no-dnd":"true",className:"btn btn-sm w-full md:btn-wide btn-solid btn-secondary border-dashed border-2 gap-2",children:[(0,o.jsx)(B.Z,{className:"stroke-2 w-5 h-5","data-no-dnd":"true"})," New Area"]})},W=function(){return(0,o.jsx)(O.hg,{className:"btn btn-square btn-sm btn-ghost",children:(0,o.jsx)(M.Z,{className:"w-6 h-6 text-base-content/80"})})},K=t(51438),Y=t(88029),X=t(99534),ee=t(41318),ne=t(60887),te=t(45587),re=t(24285),ie=function(e){var n=(0,te.nB)({id:e.id,disabled:e.disabled}),t=n.attributes,r=n.listeners,l=n.setNodeRef,s=n.transform,d=n.transition,c=n.isDragging,u={transform:re.ux.Transform.toString(s),transition:d,opacity:c?.3:1};return(0,o.jsx)("div",(0,a.Z)((0,i.Z)({ref:l,style:u},t,r),{children:e.children}))},ae=t(62879),le=function(){return(0,o.jsx)("span",{className:"area-entity-box",children:(0,o.jsx)(ae.Z,{className:"h-6 w-6 stroke-base-100"})})},se=function(e){var n,t,r=e.uuid,l=e.areaName,s=e.childAreas,c=e.editMode,u=e.onChange,m=(0,x.useSession)(),h=s.length,f=new Map(s.map((function(e){return[e.uuid,e]}))),v=(0,d.useState)(Array.from(f.keys())),p=v[0],g=v[1],b=(0,d.useState)(null),j=b[0],N=b[1];(0,d.useEffect)((function(){g(Array.from(f.keys()))}),[s]);var w=(0,R.Z)({areaId:r,accessToken:null!==(t=null===m||void 0===m||null===(n=m.data)||void 0===n?void 0:n.accessToken)&&void 0!==t?t:""}).updateAreasSortingOrderCmd,y=(0,ne.Dy)((0,ne.VT)(de),(0,ne.VT)(ne.Lg,{coordinateGetter:te.is}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsxs)("h3",{className:"flex items-center gap-4",children:[(0,o.jsx)(le,{}),"Areas"]}),(0,o.jsx)(q,{parentName:l,parentUuid:r,onSuccess:u,children:(0,o.jsx)(W,{})})]}),(0,o.jsx)("span",{className:"text-base-300 text-sm",children:h>0&&"Total: ".concat(h)})]}),(0,o.jsx)("hr",{className:"mt-4 border-1 border-base-content"}),0===h&&(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"mb-8 italic text-base-300",children:"This area doesn't have any child areas."}),c&&(0,o.jsx)(q,{parentName:l,parentUuid:r,onSuccess:u})]}),h>0&&(0,o.jsxs)(ne.LB,{sensors:y,collisionDetection:ne.pE,onDragEnd:function(e){var n=e.active,t=e.over;if(N(null),null!=n.id&&null!=(null===t||void 0===t?void 0:t.id)&&n.id!==t.id){var r=p.indexOf(n.id),i=p.indexOf(t.id),a=(0,te.Rp)(p,r,i);w(a.map((function(e,n){return{areaId:e,leftRightIndex:n}}))),g(a)}},onDragStart:function(e){var n=e.active;null!=n.id&&N(n.id)},children:[(0,o.jsx)("div",{className:"two-column-table ".concat(c?"":"xl:grid-cols-2 lg:grid-cols-2 md:grid-cols-2","  fr-2"),children:(0,o.jsx)(te.Fo,{items:p,strategy:te.U2,children:p.map((function(e,n){var t=f.get(e);return null==t||0===Object.keys(t).length?null:(0,o.jsx)(ie,{id:e,disabled:!c,children:(0,o.jsx)(oe,(0,a.Z)((0,i.Z)({index:n,borderBottom:[Math.ceil(h/2)-1,h-1].includes(n),parentUuid:r},t),{editMode:c,onChange:u}))},e)}))})}),(0,o.jsx)(ne.y9,{children:null!=j?(0,o.jsx)("div",{className:"bg-purple-100",children:(0,o.jsx)(oe,(0,a.Z)((0,i.Z)({index:p.indexOf(j),borderBottom:!0,parentUuid:r},f.get(j)),{editMode:c,onChange:u}))}):null})]}),h>0&&c&&(0,o.jsx)("div",{className:"mt-8 md:text-right",children:(0,o.jsx)(q,{"data-no-dnd":"true",parentName:l,parentUuid:r,onSuccess:u,children:(0,o.jsx)(Q,{"data-no-dnd":"true"})})})]})},oe=function(e){var n,t,r,i=e.index,a=e.borderBottom,l=e.areaName,s=e.uuid,d=e.parentUuid,c=e.onChange,u=e.editMode,m=void 0!==u&&u,h=e.climbs,x=e.children,f=(0,X.Z)(e,["index","borderBottom","areaName","uuid","parentUuid","onChange","editMode","climbs","children"]),v=0===(null!==(n=null===x||void 0===x?void 0:x.length)&&void 0!==n?n:1)&&0===(null!==(t=null===h||void 0===h?void 0:h.length)&&void 0!==t?t:1),p=f.totalClimbs,g=f.metadata,b=g.leaf,j=g.isBoulder,N=b||j;return(0,o.jsxs)("div",{className:S()("area-row",a?"border-b":""),children:[(0,o.jsx)("a",{href:"/crag/".concat(s),className:"area-entity-box","data-no-dnd":"true",children:i+1}),(0,o.jsxs)("a",{href:"/crag/".concat(s),className:"flex flex-col items-start items-stretch grow gap-y-1","data-no-dnd":"true",children:[(0,o.jsx)("div",{className:"font-semibold uppercase thick-link",children:l}),(0,o.jsxs)("div",{className:"flex gap-2 items-center",children:[!N&&(0,o.jsx)(ae.Z,{className:"stroke-base-200 w-6 h-6"}),(0,o.jsx)("span",{className:"mt-0.5 text-sm text-base-200",children:(0,o.jsxs)("span",{children:[null!==p&&void 0!==p?p:0," climbs \u2022 ",null!==(r=null===x||void 0===x?void 0:x.length)&&void 0!==r?r:0," areas"]})})]})]}),m&&(0,o.jsx)("div",{className:"text-base-300",children:(0,o.jsx)(z,{areaName:l,areaUuid:s,parentUuid:d,returnToParentPageAfterDelete:!1,onSuccess:c,children:(0,o.jsx)(G,{disabled:!v})})})]})},de=function(e){(0,Y.Z)(t,e);var n=(0,ee.Z)(t);function t(){return(0,K.Z)(this,t),n.apply(this,arguments)}return t}(ne.MA);de.activators=[{eventName:"onMouseDown",handler:function(e){return function(e){var n=e;for(;null!=n;){var t;if("true"===(null===(t=n.dataset)||void 0===t?void 0:t.noDnd))return!1;n=n.parentElement}return!0}(e.nativeEvent.target)}}];var ce=t(38230),ue=t(795),me=t(39529),he=(t(40237),t(92546)),xe=t(3173),fe=t(50957),ve=t(16799),pe=function(){return(0,o.jsx)(H.Z,{content:(0,o.jsxs)("ul",{className:"px-4 py-2 list-disc space-y-2",children:[(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"Create new climbs"}),(0,o.jsx)("br",{})," Enter one climb per line"]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"Delete climbs"}),(0,o.jsx)("br",{}),"Delete the entire line"]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"Change left-to-right order"}),(0,o.jsx)("br",{}),"Copy-n-paste lines"]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"Climb ID"}),(0,o.jsx)("br",{}),"Don't edit the strange text: ",(0,o.jsx)("i",{children:"646756eb-7552-4715-8e17-d4c1073b5d51"})]}),(0,o.jsxs)("li",{children:["Remember to press ",(0,o.jsx)("strong",{children:"Save"})," when done \ud83d\ude00"]})]}),children:(0,o.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,o.jsx)("span",{className:"text-info link-dotted",children:"Help"}),(0,o.jsx)(ve.Z,{className:"text-info w-5 h-5"})]})})},ge=function(){return(0,o.jsxs)("div",{className:"collapse collapse-plus",children:[(0,o.jsx)("input",{type:"checkbox",className:"hover:underline"}),(0,o.jsx)("div",{className:"collapse-title hover:underline",children:"Tell me more about the format"}),(0,o.jsx)("div",{className:"collapse-content",children:(0,o.jsx)("div",{className:"alert alert-success shadow-md",children:(0,o.jsxs)("div",{className:"block",children:["Syntax:",(0,o.jsx)("div",{className:"ml-4 text-base font-semibold",children:"<Climb unique ID> | <Climb name> | <Grade> | <Discipline codes>"}),(0,o.jsxs)("div",{className:"mt-2 ml-4",children:["* Discipline codes: ",(0,o.jsx)("b",{children:"B T S A TR"})," (Bouldering Trad Sport Aid Top-rope)"]}),(0,o.jsxs)("div",{className:"mt-6",children:["Example:",(0,o.jsx)("br",{}),(0,o.jsx)("code",{className:"ml-4 font-semibold",children:"e6f9ba15-27e8-5150-9709-14c5a70502a1 | Chain Reaction | 5.12c | S"})]}),(0,o.jsxs)("div",{className:"mt-6",children:[(0,o.jsx)("div",{children:"To add new climbs simply enter one climb per line:"}),(0,o.jsxs)("code",{className:"pl-4 font-semibold",children:["Biographie | 9a+ | S",(0,o.jsx)("br",{})]}),(0,o.jsx)("code",{className:"pl-4 font-semibold",children:"La Chose | 7c+ | S"}),(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("b",{children:"Pro tip"}),": Climb IDs are not required when adding new climbs."]})]})]})})})]})},be=t(85693),je=t(7543),Ne=t(11467),we=function(e){var n=function(e){var n;return e.filter((function(e){return"LOCAL_CLIMBING_ORGANIZATION"===e.orgType})).map((function(e){var t,r,i,a,l,s,o;return{id:e.orgId,areaIdList:null!==(n=e.associatedAreaIds)&&void 0!==n?n:[],name:e.displayName,description:null===(t=e.content)||void 0===t?void 0:t.description,email:null===(r=e.content)||void 0===r?void 0:r.email,website:null===(i=e.content)||void 0===i?void 0:i.website,facebook:null===(a=e.content)||void 0===a?void 0:a.facebookLink,instagram:null===(l=e.content)||void 0===l?void 0:l.instagramLink,report:null===(s=e.content)||void 0===s?void 0:s.hardwareReportLink,donation:null===(o=e.content)||void 0===o?void 0:o.donationLink}}))}(e.orgs);return(0,o.jsxs)("div",{className:"grid pt-6 pb-4 lg:pb-16 lg:pt-16",children:[(0,o.jsxs)("div",{className:"col-span-full flex justify-start items-center pb-6",children:[(0,o.jsx)("h3",{className:"mr-4",children:"Local climbing organizations"}),(0,o.jsx)(H.Z,{content:(0,o.jsxs)("p",{children:["Learn more about our\xa0",(0,o.jsx)("a",{href:"https://openbeta.substack.com/p/openbeta-and-lcos",target:"_blank",rel:"noreferrer",className:"underline",children:"initiative"}),"."]}),children:(0,o.jsx)(be.Z,{className:"h-6 w-6"})})]}),(0,o.jsx)("div",{children:0===n.length?(0,o.jsx)("p",{className:"italic text-base-content/60",children:"No organizations found for this area"}):n.map((function(e){return(0,o.jsx)(ye,{profile:e},e.id)}))})]})},ye=function(e){var n=e.profile;return(0,o.jsxs)(O.hV,{modal:!0,children:[(0,o.jsx)(Ze,{profile:n}),(0,o.jsx)(O.cZ,{children:(0,o.jsx)(Se,{profile:n})})]})},Ze=function(e){var n=e.profile;return(0,o.jsx)(O.hg,{asChild:!0,className:"flex flex-row items-center gap-4",children:(0,o.jsx)("div",{className:"sm:inline-block mr-6 mb-6",children:(0,o.jsxs)("div",{className:"flex items-center bg-light hover:bg-on-hover pl-5 pr-7 rounded-2xl",children:[(0,o.jsx)(je.Z,{className:"h-10 w-10"}),(0,o.jsxs)("div",{className:"py-5 pl-4 overflow-hidden",children:[(0,o.jsx)("p",{className:"text-base leading-6",children:n.name}),(0,o.jsx)("p",{className:"text-xs underline",children:(0,o.jsx)("a",{href:n.website,target:"_blank",rel:"noreferrer",children:n.website})})]})]})})})},Se=function(e){var n=e.profile,t=n.name,r=n.description,i=n.email,a=n.website,l=n.facebook,s=n.instagram,d=n.report,c=n.donation;return(0,o.jsxs)("div",{className:"grid md:grid-cols-6 px-11 pt-11 pb-16 gap-2 md:gap-4 bg-white rounded-lg",children:[(0,o.jsx)("div",{className:"md:col-span-1",children:(0,o.jsx)(je.Z,{className:"h-12 w-12 rounded-lg border-slate-100 border"})}),(0,o.jsxs)("div",{className:"gap-10 md:col-span-5",children:[(0,o.jsx)("p",{className:"text-base-content/60 font-semibold",children:"Local Climbing Organization"}),(0,o.jsx)("h2",{className:"card-title my-2 uppercase",children:t}),null!=a&&(0,o.jsx)("a",{className:"underline pb-5",href:a,target:"_blank",rel:"noreferrer",children:(0,o.jsx)("p",{className:"text-sm",children:a})}),null!=r&&(0,o.jsx)("p",{className:"whitespace-pre-line",children:r}),(0,o.jsx)("div",{className:null==i&&null==s&&null==l?"hidden":"border-t border-b divide-y",children:(0,o.jsxs)("div",{className:"flex felx-row flex-wrap justify-between pt-4 md:pt-6",children:[null!=i&&(0,o.jsx)("a",{className:"underline pb-4",href:"mailto:".concat(i),target:"_blank",rel:"noreferrer",children:"contact info"}),null!=s&&(0,o.jsx)("a",{className:"underline pb-4",href:s,target:"_blank",rel:"noreferrer",children:"instagram"}),null!=l&&(0,o.jsx)("a",{className:"underline pb-4",href:l,target:"_blank",rel:"noreferrer",children:"facebook"})]})}),(0,o.jsxs)("div",{className:"space-y-4 py-6",children:[(0,o.jsx)("div",{children:null!=c&&(0,o.jsxs)("a",{className:"btn btn-primary btn-outline",href:c,target:"_blank",rel:"noreferrer",children:["Make a Donation ",(0,o.jsx)(Ne.Z,{className:"ml-2 w-4 h-4"})]})}),null!=d&&(0,o.jsx)("div",{className:"card-actions ",children:(0,o.jsxs)("a",{className:"btn btn-primary btn-solid",href:d,target:"_blank",rel:"noreferrer",children:["Report Hardware Replacement"," ",(0,o.jsx)(Ne.Z,{className:"ml-2 w-4 h-4"})]})})]})]})]})},Ce=t(65799);function ke(e){var n,t,u=e.area,m=e.history,N=u.uuid,w=u.areaName,Z=u.content.description,S=u.metadata,C=u.climbs,E=u.ancestors,T=u.organizations,A=u.pathTokens,L=u.children,I=u.gradeContext,B=u.authorMetadata,M=S.lat,_=S.lng,F=(0,c.useRouter)(),U=(0,x.useSession)(),V=(0,d.useState)(),H=V[0],$=V[1],G=(0,d.useState)(),q=G[0],J=G[1],Q=(0,d.useState)(0),W=Q[0],K=Q[1],Y=(0,d.useState)(!1),X=Y[0],ee=Y[1],ne=(0,d.useState)(!1),te=ne[0],re=ne[1],ie=(0,d.useState)((0,g.iL)(L)),ae=ie[0],le=ie[1];(0,d.useEffect)((function(){le((0,g.iL)(L))}),[L]);var oe=(0,d.useState)({uuid:N,areaName:w,description:Z,latlng:"".concat(M.toString(),",").concat(_.toString()),areaType:(0,j.areaDesignationToForm)(S),climbList:(0,g.iL)(C).map((function(e){var n=e.id,t=e.name,r=e.grades,i=e.type,a=e.metadata.leftRightIndex,l=(0,g.QU)(i);return{id:n,climbId:n,name:t,gradeStr:new fe.Z(I,r,l,S.isBoulder).toString(),leftRightIndex:a,disciplines:l}}))}),de=oe[0],ve=oe[1],be=(0,D.Z)({parentId:N,accessToken:null===U||void 0===U||null===(n=U.data)||void 0===n?void 0:n.accessToken}),je=be.updateClimbCmd,Ne=be.deleteClimbsCmd,ye=(0,R.Z)({areaId:N,accessToken:null===U||void 0===U||null===(t=U.data)||void 0===t?void 0:t.accessToken}),Ze=ye.updateOneAreaCmd,Se=(0,ye.getAreaByIdCmd)({skip:!te||!X}),ke=Se.data,Ae=Se.refetch,De=(0,h.cI)({mode:"onBlur",defaultValues:(0,i.Z)({},de)}),Re=De.handleSubmit,Be=De.formState.dirtyFields,Me=De.reset,_e=De.watch,Oe=_e("latlng"),Fe=_e("climbList"),Ue=_e("areaType"),Ve=function(){var e=(0,r.Z)((function(e){var n,t,r,a,o,d,c,u,m,h,x,f,v,g,b,N;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return n=e.uuid,t=e.areaName,r=e.description,a=e.latlng,o=e.areaType,d=e.climbList,c=(0,l.Z)(a.split(","),2),u=c[0],m=c[1],h=Te(null===Be||void 0===Be?void 0:Be.climbList,d,"boulder"===Ue),x=P(de.climbList,d),f=(0,i.Z)({},!0===(null===Be||void 0===Be?void 0:Be.areaName)&&{areaName:t},!0===(null===Be||void 0===Be?void 0:Be.areaType)&&Je&&(0,j.areaDesignationToDb)(o),!0===(null===Be||void 0===Be?void 0:Be.latlng)&&{lat:parseFloat(u),lng:parseFloat(m)},!0===(null===Be||void 0===Be?void 0:Be.description)&&{description:r}),v=Object.keys(f).length>0,g=h.length>0,b=x.length>0,v||g||b?b?(N=x.map((function(e){return e.climbId})),[4,Ne(N)]):[3,2]:(p.Am.warn("Nothing to save.  Please make at least 1 edit."),[2]);case 1:s.sent(),s.label=2;case 2:return g?[4,je({parentId:n,changes:h})]:[3,4];case 3:s.sent(),s.label=4;case 4:return v?[4,Ze((0,i.Z)({},f))]:[3,6];case 5:s.sent(),s.label=6;case 6:return ve((0,i.Z)({},e)),Me(e,{keepValues:!0}),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),He=(0,o.jsx)(Le,{cache:de,editMode:X,onReset:function(){return K(Date.now())}}),ze=de.areaName,$e=de.description,Ge=E[E.length-2],qe=Ee(Oe),Je=0===Fe.length&&0===de.climbList.length&&0===ae.length,Qe=("area"===Ue||"area"===de.areaType)&&0===de.climbList.length,We=!Qe;return(0,d.useEffect)((function(){var e=document.getElementById("deleteButtonPlaceholder");null!=e&&$(e);var n=document.getElementById("addAreaPlaceholder");null!=n&&J(n)}),[X,Qe]),(0,d.useEffect)((function(){if(null!=(null===ke||void 0===ke?void 0:ke.area)){le((0,g.iL)(ke.area.children));var e=ke.area,n=e.uuid,t=e.areaName,r=e.metadata,l=e.content,s=e.climbs,o=r.lat,d=r.lng;ve((function(e){return(0,a.Z)((0,i.Z)({},e),{uuid:n,areaName:t,description:l.description,areaType:(0,j.areaDesignationToForm)(r),latlng:"".concat(o.toString(),",").concat(d.toString()),climbList:(0,g.iL)(s).map((function(e){var n=e.id,t=e.name,r=e.grades,i=e.type,a=e.metadata.leftRightIndex,l=(0,g.QU)(i);return{id:n,climbId:n,name:t,gradeStr:new fe.Z(I,r,l,S.isBoulder).toString(),leftRightIndex:a,disciplines:l}}))})}))}}),[null===ke||void 0===ke?void 0:ke.area]),(0,d.useEffect)((function(){re(!0)}),[]),(0,o.jsxs)(o.Fragment,{children:[null!=H&&(0,o.jsx)(f.f,{container:H,children:X&&(0,o.jsx)(z,{areaName:ze,areaUuid:N,parentUuid:Ge,disabled:!Je})}),null!=q&&(0,o.jsx)(f.f,{container:q,children:Qe&&(0,o.jsx)(se,{uuid:N,areaName:ze,childAreas:ae,onChange:function(){X&&Ae(),F.replace(F.asPath)},editMode:X})}),(0,o.jsx)(h.RV,(0,a.Z)((0,i.Z)({},De),{children:(0,o.jsxs)("form",{onSubmit:Re(Ve),children:[(0,o.jsx)(ce.M,{ancestors:E,pathTokens:A,formAction:He}),(0,o.jsxs)("div",{className:"mt-4 justify-end items-center flex flex-row",id:"editTogglePlaceholder",children:[(0,o.jsx)("div",{className:"mr-2",id:"editTogglePlaceholder",children:(0,o.jsx)(he.Z,{onChange:ee})}),!(0,y.xb)(m)&&(0,o.jsxs)(O.hV,{children:[(0,o.jsx)(O.hg,{className:"btn btn-secondary btn-sm",children:"Show Change History"}),(0,o.jsx)(O.cZ,{title:"Change history",children:(0,o.jsx)(Ce.default,{history:m})})]})]}),(0,o.jsxs)("div",{className:"area-climb-page-summary",children:[(0,o.jsxs)("div",{className:"area-climb-page-summary-left",children:[(0,o.jsx)("h1",{className:"text-4xl md:text-5xl",children:(0,o.jsx)(ue.default,{initialValue:ze,name:"areaName",reset:W,editable:X,placeholder:"Area name",rules:b.cq})}),X?(0,o.jsx)(ue.default,{initialValue:Oe,name:"latlng",reset:W,editable:X,placeholder:"Enter a latitude,longitude. Ex: 46.433333,11.85",rules:b.gO}):null!=qe&&(0,o.jsxs)("div",{className:"flex flex-col text-xs text-base-300 border-t border-b divide-y",children:[(0,o.jsxs)("a",{href:(0,g.eb)({lat:qe[0],lng:qe[1]}),target:"blank",className:"flex items-center gap-2 py-3",children:[(0,o.jsx)(v.Z,{className:"w-5 h-5"}),(0,o.jsxs)("span",{className:"mt-0.5",children:[(0,o.jsx)("b",{children:"LAT,LNG"}),"\xa0",(0,o.jsxs)("span",{className:"link-dotted",children:[qe[0].toFixed(5),", ",qe[1].toFixed(5)]})]})]}),(0,o.jsx)(xe._,(0,i.Z)({},B))]}),X&&(0,o.jsxs)("div",{className:"fadeinEffect",children:[(0,o.jsxs)("div",{className:"mt-8",children:[(0,o.jsx)("h3",{children:"Housekeeping"}),(0,o.jsx)(Pe,{disabled:!Je})]}),(0,o.jsxs)("div",{className:"mt-6 form-control",children:[(0,o.jsx)("label",{className:"label",children:(0,o.jsx)("span",{className:"label-text font-semibold",children:"Permanently delete this area"})}),(0,o.jsx)("div",{className:"ml-2",id:"deleteButtonPlaceholder"})]})]})]}),(0,o.jsxs)("div",{className:"area-climb-page-summary-right",children:[(0,o.jsx)("h3",{children:"Description"}),(0,o.jsx)(me.default,{initialValue:$e,name:"description",reset:W,editable:X,placeholder:"Area description",rules:b.MM}),!X&&(0,o.jsx)(we,{orgs:T})]})]}),(0,o.jsx)("div",{className:"mt-4 block lg:hidden",children:He}),Qe&&(0,o.jsx)("div",{className:"block mt-16 min-h-[8rem]",id:"addAreaPlaceholder"}),We&&(0,o.jsx)(k,{editable:X}),X&&We&&(0,o.jsxs)("div",{className:"mt-12 fadeinEffect flex flex-col gap-4",children:[(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsx)("h3",{children:"Power Editor"}),(0,o.jsx)(pe,{})]}),(0,o.jsx)(ge,{}),(0,o.jsx)(Ie,{name:"climbList",initialClimbs:de.climbList,resetSignal:W,editable:!0,gradeHelper:new fe.M(I,S.isBoulder)})]})]})}))]})}var Ee=function(e){var n=(0,l.Z)(e.split(","),2),t=n[0],r=n[1],i=parseFloat(t),a=parseFloat(r);return Number.isNaN(i)||Number.isNaN(a)?null:[i,a]},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=n.reduce((function(n,r,a){var l,s=null!==(l=null===e||void 0===e?void 0:e[a])&&void 0!==l?l:{};if(0===Object.keys(s).length)return n;var o,d=r.climbId,c=r.name,u=r.leftRightIndex,m=r.gradeStr,h=r.disciplines,x=Object.values(null!==(o=null===s||void 0===s?void 0:s.disciplines)&&void 0!==o?o:{}).filter((function(e){return e})).length>0;return n.push((0,i.Z)({id:d},!0===(null===s||void 0===s?void 0:s.name)&&{name:c},!0===(null===s||void 0===s?void 0:s.id)&&{leftRightIndex:u},t&&{disciplines:{bouldering:!0}},!0===(null===s||void 0===s?void 0:s.gradeStr)&&{grade:m,disciplines:h},x&&{disciplines:h})),n}),[]);return r},Ae=function(){return(0,o.jsxs)("div",{children:[(0,o.jsx)(ce.O,{}),(0,o.jsx)("div",{className:"mt-4 text-right",children:(0,o.jsx)(he.Z,{onChange:function(){},showSkeleton:!0})}),(0,o.jsxs)("div",{className:"area-climb-page-summary",children:[(0,o.jsx)("div",{className:"area-climb-page-summary-left",children:(0,o.jsx)("h1",{className:"text-4xl md:text-5xl rounded-box bg-base-200/10 w-72",children:"\xa0"})}),(0,o.jsxs)("div",{className:"area-climb-page-summary-right",children:[(0,o.jsx)("h3",{className:"rounded-box bg-base-200/10 w-48",children:"\xa0"}),(0,o.jsx)("div",{className:"mt-4 rounded-box bg-base-200/10 w-full h-80"})]})]})]})},Le=m()((0,r.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,t.e(5679).then(t.bind(t,55679)).then((function(e){return e.FormSaveAction}))];case 1:return[2,e.sent()]}}))})),{loadableGenerated:{webpack:function(){return[55679]}},ssr:!1}),Ie=m()((0,r.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve().then(t.bind(t,40237))];case 1:return[2,e.sent()]}}))})),{loadableGenerated:{webpack:function(){return[40237]}}}),Pe=m()((0,r.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve().then(t.bind(t,81758)).then((function(e){return e.AreaDesignationRadioGroup}))];case 1:return[2,e.sent()]}}))})),{loadableGenerated:{webpack:function(){return[81758]}}})},3173:function(e,n,t){t.d(n,{_:function(){return x}});var r,i=t(41799),a=t(69396),l=t(85893),s=t(67294),o=t(41664),d=t.n(o),c=t(48974),u=t(25550);function m(){return m=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},m.apply(this,arguments)}var h=function(e){return s.createElement("svg",m({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=s.createElement("g",{stroke:"#292D32",strokeWidth:1.68,strokeLinecap:"round",strokeLinejoin:"round"},s.createElement("path",{d:"M16.17 10.06H7.83c-1.18 0-1.59-.79-.9-1.75l4.17-5.84c.49-.7 1.31-.7 1.79 0l4.17 5.84c.7.96.29 1.75-.89 1.75Z"}),s.createElement("path",{d:"M17.59 18H6.42c-1.58 0-2.12-1.05-1.19-2.33l3.99-5.61h5.57l3.99 5.61c.93 1.28.39 2.33-1.19 2.33ZM12 22v-4"}))))},x=function(e){var n=e.updatedAt,t=e.updatedByUser,r=e.createdAt,o=e.createdByUser,d=(0,s.useState)({updatedAtStr:"",createdAtStr:""}),m=d[0],x=d[1];(0,s.useEffect)((function(){x((function(e){return(0,a.Z)((0,i.Z)({},e),{updatedAtStr:null!=n?(0,u.Up)(n):"",createdAtStr:null!=r?(0,u.Up)(r):""})}))}),[]);var v=m.updatedAtStr,p=m.createdAtStr;return(0,l.jsxs)("div",{className:"flex flex-col gap-3 py-3 text-base-300 text-xs",children:[null!=r&&(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(h,{className:"h-5 w-5"}),(0,l.jsxs)("span",{children:[(0,l.jsx)("b",{children:"CREATED"}),f(o),"\xa0",p]})]}),null!=n&&(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(c.Z,{className:"h-4 w-4 mr-1"}),(0,l.jsxs)("span",{children:[(0,l.jsx)("b",{children:"UPDATED"}),f(t),"\xa0",v]})]})]})},f=function(e){return null==e?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("b",{children:"\xa0BY\xa0"}),(0,l.jsx)(d(),{href:"/u/".concat(e),children:(0,l.jsx)("a",{className:"link-dotted",children:e})})]})}},40237:function(e,n,t){t.r(n),t.d(n,{Placeholder:function(){return j},default:function(){return b}});var r=t(85893),i=t(87536),a=t(94184),l=t.n(a),s=t(22292),o=t(86146),d=t(6898),c=t(4506),u=t(71954),m=t(77943),h=t.n(m),x=t(75514),f=t(28846),v=t(2649),p=t(83330),g=t(41544);function b(e){var n=e.initialClimbs,t=e.name,a=e.editable,m=void 0!==a&&a,x=e.resetSignal,g=e.gradeHelper,b=(0,i.Dq)({name:t,rules:g.getBulkValidationRules()}),w=b.replace,y=b.fields,Z=y.some((function(e){var n;return Object.values(null!==(n=e.errors)&&void 0!==n?n:{}).filter((function(e){return null!=e})).length>0}));return(0,r.jsx)(s.LexicalComposer,{initialConfig:(0,f.dF)(n),children:(0,r.jsxs)("div",{className:"form-control",children:[(0,r.jsxs)("div",{className:l()("editor-csv-container",m?"bg-slate-200":""),children:[(0,r.jsx)(o.RichTextPlugin,{contentEditable:(0,r.jsx)(d.ContentEditable,{className:"editor-csv-input"}),placeholder:(0,r.jsx)(j,{}),ErrorBoundary:h()}),(0,r.jsx)(u.OnChangePlugin,{onChange:function(e,n){(0,v.Jg)(e,n,w,y,g)},ignoreSelectionChange:!0}),(0,r.jsx)(c.HistoryPlugin,{}),(0,r.jsx)(p.sn,{initialValue:n,resetSignal:x,editable:m})]}),(0,r.jsx)(N,{fields:y}),(0,r.jsx)("label",{className:"label ml-12",id:"".concat(t,"-helper"),htmlFor:t,children:Z&&(0,r.jsx)("span",{className:"label-text-alt text-error tracking-normal font-normal",children:"Please fix formatting errors"})})]})})}function j(){return(0,r.jsxs)("div",{className:"editor-csv-placeholder",children:["Climb one",(0,r.jsx)("br",{}),"Climb two"]})}var N=function(e){var n=e.fields;return(0,r.jsx)("div",{className:"absolute",children:null===n||void 0===n?void 0:n.map((function(e,n){var t,i=Object.values(null!==(t=null===e||void 0===e?void 0:e.errors)&&void 0!==t?t:{}).filter((function(e){return null!=e})),a=document.querySelector("div.editor-csv-input>p:nth-child(".concat(n+1,")"));return null!=a&&(i.length>0?a.className="editor-csv-paragraph ltr bg-opacity-30 bg-error":a.className="editor-csv-paragraph ltr"),(0,r.jsx)(g.Z,{content:(0,r.jsx)(r.Fragment,{children:i.map((function(e,n){return(0,r.jsxs)("div",{children:["\xb7 ",e]},n)}))}),className:"ml-0.5 h-7 flex justify-center items-center",children:i.length>0?(0,r.jsx)(x.Z,{className:"w-4 h-4 text-error"}):null},n)}))})}},92546:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(85893),i=t(67294),a=t(33299),l=t(94184),s=t.n(l);function o(e){var n=e.onChange,t=e.showSkeleton,l=void 0!==t&&t,o=(0,i.useState)(!1),d=o[0],c=o[1],u=(0,a.useSession)();(0,i.useEffect)((function(){"unauthenticated"===u.status&&d&&(0,a.signIn)("auth0")}),[u,d]),(0,i.useEffect)((function(){var e="true"===sessionStorage.getItem("editMode");c(e),n(e)}),[n]);return(0,r.jsxs)("label",{className:s()("inline-flex label",l?"opacity-30":"opacity-100 cursor-pointer"),children:[(0,r.jsx)("span",{className:"label-text mr-2 text-md font-semibold",children:"Edit mode"}),(0,r.jsx)("input",{type:"checkbox",name:"editMode",className:"toggle toggle-accent md:toggle-lg",checked:d,disabled:l,onChange:function(){n((function(e){return!e})),c((function(e){return sessionStorage.setItem("editMode",(!e).toString()),!e}))}})]})}},39529:function(e,n,t){t.r(n),t.d(n,{Placeholder:function(){return E},default:function(){return k}});var r=t(85893),i=t(87536),a=t(94184),l=t.n(a),s=t(22292),o=t(86146),d=t(17150),c=t(6898),u=t(4506),m=t(71954),h=t(77943),x=t.n(h),f=t(38957),v=t(69421),p=t(28846),g=t(2649),b=t(828),j=t(84260),N=t(67294),w=t(32998),y=t(36571),Z=t(30644),S=t(65637);function C(e){var n=e.editable,t=void 0!==n&&n,r=(0,b.Z)((0,j.useLexicalComposerContext)(),1)[0],i=(0,Z.Z)();return(0,N.useEffect)((function(){r.update((function(){if(r.setEditable(t),!i)if(t){var e=(0,y.$convertToMarkdownString)(y.TRANSFORMERS);(0,S.jH)(e)}else(0,y.$convertFromMarkdownString)((0,w.$getRoot)().getTextContent(),y.TRANSFORMERS)}))}),[t]),null}function k(e){var n=e.initialValue,t=void 0===n?"":n,a=e.name,h=e.editable,b=void 0!==h&&h,j=e.reset,N=e.placeholder,w=void 0===N?"Enter some text":N,y=e.rules,Z=(0,i.bc)({name:a,rules:y}),k=Z.field,T=Z.fieldState.error;return(0,r.jsx)(s.LexicalComposer,{initialConfig:(0,p.pT)(t,b),children:(0,r.jsxs)("div",{className:"form-control",children:[(0,r.jsxs)("div",{className:l()("editor-container",b?"bg-slate-200":""),children:[b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.PlainTextPlugin,{contentEditable:(0,r.jsx)(c.ContentEditable,{className:"editor-input"}),placeholder:(0,r.jsx)(E,{text:w}),ErrorBoundary:x()}),(0,r.jsx)(S.tw,{initialValue:t,editable:b,resetSignal:j})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.RichTextPlugin,{contentEditable:(0,r.jsx)(c.ContentEditable,{className:"editor-input"}),placeholder:(0,r.jsx)(E,{text:w}),ErrorBoundary:x()}),(0,r.jsx)(f.ListPlugin,{}),(0,r.jsx)(v.LinkPlugin,{})]}),(0,r.jsx)(m.OnChangePlugin,{onChange:function(e,n){(0,g.ZP)(e,n,k)},ignoreSelectionChange:!0}),(0,r.jsx)(u.HistoryPlugin,{}),(0,r.jsx)(C,{editable:b})]}),(0,r.jsx)("label",{className:"label",id:"".concat(a,"-helper"),htmlFor:a,children:null!=(null===T||void 0===T?void 0:T.message)&&(0,r.jsx)("span",{className:"label-text-alt text-error tracking-normal font-normal",children:null===T||void 0===T?void 0:T.message})})]})})}var E=function(e){var n=e.text;return(0,r.jsx)("div",{className:"editor-placeholder",children:n})}},795:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(85893),i=t(87536),a=t(94184),l=t.n(a),s=t(22292),o=t(17150),d=t(6898),c=t(4506),u=t(71954),m=t(77943),h=t.n(m),x=t(28846),f=t(2649),v=t(828),p=t(84260),g=t(32998),b=t(67294),j=/[\n\r]/g;function N(){var e=(0,v.Z)((0,p.useLexicalComposerContext)(),1)[0];return(0,b.useEffect)((function(){return e.registerNodeTransform(g.RootNode,(function(e){var n=e.getTextContent();if(j.test(n)){var t=n.replace(j,""),r=(0,g.$createParagraphNode)();r.append((0,g.$createTextNode)(t)),e.clear().append(r),e.selectEnd()}}))}),[e]),null}var w=t(65637);function y(e){var n=e.editable,t=(0,v.Z)((0,p.useLexicalComposerContext)(),1)[0];return(0,b.useEffect)((function(){t.setEditable(n)}),[n]),null}var Z=t(39529);function S(e){var n=e.initialValue,t=void 0===n?"":n,a=e.name,m=e.editable,v=void 0!==m&&m,p=e.reset,g=e.placeholder,b=void 0===g?"Enter some text...":g,j=e.className,S=void 0===j?"":j,C=e.rules,k=e.helperText,E=(0,i.bc)({name:a,rules:C}),T=E.field,A=E.fieldState.error,L=T.onBlur;return(0,r.jsx)(s.LexicalComposer,{initialConfig:(0,x.og)(t),children:(0,r.jsxs)("div",{className:"form-control",children:[(0,r.jsxs)("div",{className:l()("editor-container",S,v?"bg-slate-200":""),onBlur:L,children:[(0,r.jsx)(o.PlainTextPlugin,{contentEditable:(0,r.jsx)(d.ContentEditable,{className:"editor-input"}),placeholder:(0,r.jsx)(Z.Placeholder,{text:b}),ErrorBoundary:h()}),(0,r.jsx)(c.HistoryPlugin,{}),(0,r.jsx)(N,{}),(0,r.jsx)(u.OnChangePlugin,{onChange:function(e,n){(0,f.ZP)(e,n,T)},ignoreSelectionChange:!0}),(0,r.jsx)(w.tw,{initialValue:t,editable:v,resetSignal:p}),(0,r.jsx)(y,{editable:v})]}),(0,r.jsxs)("label",{className:"label",id:"".concat(a,"-helper"),htmlFor:a,children:[null!=(null===A||void 0===A?void 0:A.message)&&(0,r.jsx)("span",{className:"label-text-alt text-error tracking-normal font-normal",children:null===A||void 0===A?void 0:A.message}),null==(null===A||void 0===A?void 0:A.message)&&k]})]})})}},28846:function(e,n,t){t.d(n,{dF:function(){return v},og:function(){return f},pT:function(){return x}});var r=t(36571),i=t(2903),a=t(73435),l=t(44783),s=t(29428),o=t(23277),d={ltr:"ltr",rtl:"rtl",placeholder:"editor-placeholder",paragraph:"editor-single-paragraph"},c={ltr:"ltr",rtl:"rtl",placeholder:"editor-csv-placeholder",paragraph:"editor-csv-paragraph"},u={ltr:"ltr",rtl:"rtl",placeholder:"editor-placeholder",paragraph:"editor-paragraph",link:"underline",list:{nested:{listitem:"editor-nested-listitem"},ol:"list-decimal mb-4",ul:"list-disc mb-4",listitem:"list-inside"}},m=t(65637),h=t(83330),x=function(e,n){return{editorState:function(){n?(0,m.jH)(null!==e&&void 0!==e?e:""):(0,r.$convertFromMarkdownString)(null!==e&&void 0!==e?e:"",r.TRANSFORMERS)},namespace:"editor",theme:u,onError:function(e){throw e},nodes:[s.MarkNode,i.HeadingNode,i.QuoteNode,a.LinkNode,l.ListNode,l.ListItemNode,o.CodeNode]}},f=function(e){return{editorState:function(){return(0,m.jH)(e)},namespace:"editor",theme:d,onError:function(e){throw e},nodes:[]}},v=function(e){return{editorState:function(){return(0,h.Fz)(e)},namespace:"editor",theme:c,onError:function(e){throw e},nodes:[]}}},2649:function(e,n,t){t.d(n,{Jg:function(){return c},ZP:function(){return d}});var r=t(828),i=t(32998),a=t(68697),l=t(57632),s=t(36005),o=t(57037);function d(e,n,t){null!=(null===t||void 0===t?void 0:t.onChange)&&e.read((function(){var e,n=(0,i.$getRoot)();null===t||void 0===t||t.onChange(null===(e=n.getTextContent())||void 0===e?void 0:e.trim())}))}function c(e,n,t,r,a){e.read((function(){var e=(0,s.HK)(r,"climbId"),n=(0,i.$getRoot)().getAllTextNodes().reduce((function(n,t,r){var i=u(t,r,e,a);return null!=i&&n.push(i),n}),[]);t(n)}))}var u=function(e,n,t,r){var i,a=null===(i=e.getTextContent())||void 0===i?void 0:i.trim().split(/\s*\|\s*/);return m(a,n,t,r)},m=function(e,n,t,i){if(e.length>=2){var s=e[0].trim(),d=(0,a.Z)(s),c=(0,l.Z)();d&&(c=s,e.shift());var u,m=e[0].trim();""===m&&(m="Untitled");var h,x,f=null!==(u=e[1])&&void 0!==u?u:"",v=(0,r.Z)((0,o.uZ)(null!==(h=e[2])&&void 0!==h?h:""),2),p=v[0];return x=v[1]?"Disciplines formatting error.  Valid codes: B S T TR A.":0===Object.keys(p).length?"Disciplines not set":void 0,{id:c,climbId:c,name:m,leftRightIndex:n,gradeStr:f,isNew:!d,errors:{gradeStr:i.validate(f),disciplines:x},disciplines:p}}if(1===e.length){if((0,a.Z)(e[0].trim())){var g=e[0].trim();return{id:n.toString(),climbId:g,name:"Untitled ".concat(n+1),leftRightIndex:n,gradeStr:null!=g&&null!=(null===t||void 0===t?void 0:t[g])?null===t||void 0===t?void 0:t[g].gradeStr:void 0,disciplines:null!=(null===t||void 0===t?void 0:t[g])?t[g].disciplines:(0,o.JZ)()}}var b=e[0].trim();return{id:n.toString(),climbId:(0,l.Z)(),name:b,leftRightIndex:n,gradeStr:"",isNew:!0,disciplines:(0,o.JZ)(),errors:{gradeStr:"Grade not set",disciplines:"Disciplines not set"}}}return{id:n.toString(),climbId:(0,l.Z)(),name:"Untitled ".concat(n+1),leftRightIndex:n,gradeStr:"",isNew:!0,disciplines:(0,o.JZ)(),errors:{gradeStr:"Grade not set",disciplines:"Disciplines not set"}}}},83330:function(e,n,t){t.d(n,{Fz:function(){return c},sn:function(){return d}});var r=t(828),i=t(84260),a=t(67294),l=t(30644),s=t(32998),o=t(57037);function d(e){var n=e.initialValue,t=e.resetSignal,s=e.editable,o=void 0!==s&&s,d=(0,r.Z)((0,i.useLexicalComposerContext)(),1)[0],u=(0,l.Z)();return(0,a.useEffect)((function(){o&&!u&&d.update((function(){c(n)}))}),[t,n]),null}var c=function(e){var n=(0,s.$getRoot)();n.clear(),e.forEach((function(e){var t=(0,s.$createParagraphNode)();t.append((0,s.$createTextNode)(u(e))),n.append(t)}))},u=function(e){var n=e.climbId,t=e.name,r=e.gradeStr,i=e.disciplines;return"".concat(null!==n&&void 0!==n?n:""," | ").concat(t," | ").concat(null!==r&&void 0!==r?r:""," | ").concat((0,o.q4)(i).join(" "))}},65637:function(e,n,t){t.d(n,{jH:function(){return o},tw:function(){return s}});var r=t(828),i=t(84260),a=t(67294),l=t(32998);function s(e){var n=e.initialValue,t=e.resetSignal,l=e.editable,s=void 0!==l&&l,d=(0,a.useState)(t),c=d[0],u=d[1],m=(0,r.Z)((0,i.useLexicalComposerContext)(),1)[0];return(0,a.useEffect)((function(){s&&t!==c&&m.update((function(){u(t),o(n)}))}),[t]),null}var o=function(e){var n=(0,l.$getRoot)(),t=(0,l.$createParagraphNode)();t.append((0,l.$createTextNode)(e)),n.clear().append(t)}},44635:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(47568),i=t(828),a=t(20414),l=t(50319),s=t(43896),o=t(22920),d=t(26600),c=t(21239),u=t(52618);function m(e){var n=e.parentId,t=e.accessToken,m=void 0===t?"":t,h=e.onUpdateCompleted,x=e.onUpdateError,f=e.onDeleteCompleted,v=e.onDeleteError,p=(0,i.Z)((0,l.D)(c.zl,{client:d.Si,onCompleted:function(){var e=(0,r.Z)((function(e){var t,i;return(0,a.__generator)(this,(function(l){switch(l.label){case 0:return t=e.updateClimbs,i=Array.isArray(t)?t:[],[4,Promise.all(i.map(function(){var e=(0,r.Z)((function(e){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,(0,u.g)("/api/revalidate?c=".concat(e))];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}()))];case 1:return l.sent(),[4,(0,u.g)("/api/revalidate?s=".concat(n))];case 2:return l.sent(),(0,o.Am)("Climbs updated \u2728"),null!=h&&h(e),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),onError:function(e){o.Am.error("Climb update error: ".concat(e.message)),null!=x&&x(e)}}),1),g=p[0],b=function(){var e=(0,r.Z)((function(e){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,g({variables:{input:e},context:{headers:{authorization:"Bearer ".concat(null!==m&&void 0!==m?m:"")}}})];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),j=(0,i.Z)((0,l.D)(c.Xz,{client:d.Si,onCompleted:function(){var e=(0,r.Z)((function(e){return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,(0,u.g)("/api/revalidate?s=".concat(n))];case 1:return t.sent(),(0,o.Am)("Climbs deleted \u2714\ufe0f"),null!=f&&f(e),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),onError:function(e){o.Am.error("Climb delete error: ".concat(e.message)),null!=v&&v(e)}}),1),N=j[0],w=function(){var e=(0,r.Z)((function(e){var t;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,N({variables:{input:{parentId:n,idList:e}},context:{headers:{authorization:"Bearer ".concat(null!==m&&void 0!==m?m:"")}}})];case 1:if(null==(t=r.sent()).data)throw new s.__("Error running deleteClimbsApi()");return[2,t.data.deleteClimbsApi]}}))}));return function(n){return e.apply(this,arguments)}}();return{updateClimbCmd:b,deleteClimbsCmd:w}}}}]);